# Metasploit Commands Cheatsheet

**Metasploit** is a powerful penetration testing framework for exploiting vulnerabilities and generating payloads. This guide covers essential Metasploit commands for users who know the tool but need a quick reference. Always ensure you have permission to test target systems.

## Basic Usage
- **Launch Metasploit Console**:  
  ```bash
  msfconsole
  ```

- **Show Help**:  
  ```bash
  help
  ```

- **Check Version**:  
  ```bash
  version
  ```

- **Save Configuration**:  
  ```bash
  save
  ```

- **Exit Console**:  
  ```bash
  exit
  ```

- **Connect to Host** (Netcat-like):  
  ```bash
  connect <host> <port>
  ```

## Module Management
- **Search by Keyword**:  
  ```bash
  search <keyword>
  ```

- **Search by Module Type** (e.g., exploit, payload, auxiliary):  
  ```bash
  search type:exploit <keyword>
  ```

- **Search by Platform** (e.g., windows, linux, unix):  
  ```bash
  search platform:windows <keyword>
  ```

- **Search by Author**:  
  ```bash
  search author:<name>
  ```

- **Search by CVE** (Common Vulnerabilities and Exposures):  
  ```bash
  search cve:<year>-<number>
  ```

- **Search by Port**:  
  ```bash
  search port:<number>
  ```

- **Search by Name and Filter** (e.g., rank:excellent):  
  ```bash
  search name:<keyword> rank:excellent
  ```

- **Search by Module Path**:  
  ```bash
  search path:<module_path>
  ```

- **Select Module**:  
  ```bash
  use <module_path>
  ```

- **Show Module Info**:  
  ```bash
  info
  ```

- **List Module Options**:  
  ```bash
  show options
  ```

- **List Compatible Payloads**:  
  ```bash
  show payloads
  ```

- **List Available Targets**:  
  ```bash
  show targets
  ```

- **Return to Previous Context**:  
  ```bash
  back
  ```

- **Check Vulnerability**:  
  ```bash
  check
  ```

## Setting Options
- **Set Module Option**:  
  ```bash
  set <option> <value>
  ```

- **Set Global Option**:  
  ```bash
  setg <option> <value>
  ```

- **Clear Module Option**:  
  ```bash
  unset <option>
  ```

- **Clear Global Option**:  
  ```bash
  unsetg <option>
  ```

## Exploit Execution
- **Run Exploit**:  
  ```bash
  exploit
  ```

- **Run and Background Session**:  
  ```bash
  exploit -z
  ```

- **Run as Background Job**:  
  ```bash
  exploit -j
  ```

## Payload Creation (msfvenom)
- **List Payloads**:  
  ```bash
  msfvenom -l payloads
  ```

- **List Encoders**:  
  ```bash
  msfvenom -l encoders
  ```

- **Generate Payload**:  
  ```bash
  msfvenom -p <payload> LHOST=<ip> LPORT=<port> -f <format> > output
  ```

- **Encode Payload**:  
  ```bash
  msfvenom -p <payload> -e <encoder> -i <iterations> -f <format>
  ```

## Database Commands
- **Check Database Status**:  
  ```bash
  db_status
  ```

- **Connect to Database**:  
  ```bash
  db_connect <user>:<pass>@<host>/<db>
  ```

- **Import Scan Results**:  
  ```bash
  db_import <file>
  ```

- **List Hosts**:  
  ```bash
  hosts
  ```

- **List Services**:  
  ```bash
  services
  ```

## Updating Metasploit
- **Update Framework** (Debian-based):  
  ```bash
  sudo apt update && sudo apt install metasploit-framework
  ```

- **Update Database**:  
  ```bash
  db_update
  ```

## Tips
- Use `check` before `exploit` to verify vulnerabilities if supported.
- Ensure `LHOST` and `LPORT` match your listener in `msfvenom`.
- Combine with Nmap for target discovery:  
  ```bash
  nmap -oX scan.xml <target> && msfconsole -x "db_import scan.xml"
  ```
- Test on authorized systems only (e.g., Metasploitable).
- Check module options with `show options` before running.